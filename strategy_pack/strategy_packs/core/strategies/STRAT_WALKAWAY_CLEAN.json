{
  "strategy_id": "STRAT_WALKAWAY_CLEAN",
  "revision": 1,
  "name": "Walk away cleanly (professional exit)",
  "category": "RISK_CONTROL",
  "subcategories": [],
  "tags": [
    "WALKAWAY",
    "BOUNDARY",
    "EMAIL"
  ],
  "summary": "If terms are outside your walk-away, exit politely, state the reason at a high level, and leave the door open.",
  "goal": "Protect your downside while preserving optionality.",
  "counterparty_guidance": [
    "Ask whether there is a viable path if they claim they will walk.",
    "Restate the value of agreement without pleading.",
    "If the walkaway is real, end respectfully and keep optionality.",
    "Avoid last-minute giveaways that reset your boundaries."
  ],
  "rationale": "",
  "applicability": {
    "domains": [
      "GENERAL",
      "RENT_HOUSING",
      "PROCUREMENT_VENDOR",
      "JOB_OFFER_COMP",
      "SERVICES_CONTRACTOR",
      "PERSONAL_FAMILY"
    ],
    "channels": [
      "EMAIL",
      "DM",
      "IN_PERSON_NOTES"
    ],
    "when_to_use": [
      "Use when you need a structured move to progress the negotiation."
    ],
    "when_not_to_use": [
      "Avoid when facts are missing and you need intake/clarification first."
    ],
    "prerequisites": [
      {
        "id": "PREREQ_HAS_OBJECTIVES",
        "description": "Case objectives exist (target/acceptable/walk-away).",
        "condition": {
          "type": "PREDICATE",
          "predicate": {
            "op": "EXISTS",
            "path": "/objectives/target"
          }
        },
        "severity": "WARNING",
        "remediation": "Fill target/acceptable/walk-away in the Strategy Canvas."
      }
    ]
  },
  "inputs": [
    {
      "key": "walkaway_reason",
      "label": "High-level reason",
      "type": "STRING",
      "required": true
    },
    {
      "key": "door_open_line",
      "label": "Optional door-open line",
      "type": "STRING",
      "required": false
    }
  ],
  "steps": [
    {
      "step_id": "STEP_VALIDATE",
      "title": "Validate context and prerequisites",
      "instruction": "Validate prerequisites, restate the intended move, and identify missing info that would improve execution.",
      "agent_actions": [
        {
          "action": "Load case snapshot",
          "tool": "RETRIEVE_CASE",
          "output_key": "case"
        }
      ],
      "outputs": [
        "PLAN_PATCH"
      ],
      "notes": "If blockers exist, return remediation instead of artifacts."
    },
    {
      "step_id": "STEP_EXECUTE",
      "title": "Execute the strategy",
      "instruction": "Generate the required artifacts (drafts, packages, checklist) and run critique rubrics before presenting to the user.",
      "agent_actions": [
        {
          "action": "Generate message drafts",
          "tool": "GENERATE_MESSAGE_DRAFTS",
          "output_key": "drafts"
        },
        {
          "action": "Critique drafts",
          "tool": "CRITIQUE_MESSAGE",
          "output_key": "judge"
        }
      ],
      "outputs": [
        "MESSAGE_DRAFTS",
        "DECISION_LOG"
      ]
    }
  ],
  "scripts": {
    "snippets": [],
    "templates": []
  },
  "branches": [
    {
      "branch_id": "BRANCH_THEY_PRESSURE_DEADLINE",
      "label": "They pressure you to decide immediately",
      "trigger": {
        "type": "ANY",
        "any": [
          {
            "type": "PREDICATE",
            "predicate": {
              "op": "CONTAINS",
              "path": "/timeline/recent_events/0/raw_text",
              "value": "today"
            }
          },
          {
            "type": "PREDICATE",
            "predicate": {
              "op": "CONTAINS",
              "path": "/timeline/recent_events/0/raw_text",
              "value": "deadline"
            }
          }
        ]
      },
      "recommended_move": {
        "move_type": "DEFER_AND_SCHEDULE",
        "instruction": "Reassert your decision standard and propose a short, firm decision window; if not possible, prepare to walk away."
      },
      "outputs": [
        "MESSAGE_DRAFTS",
        "DECISION_LOG"
      ],
      "risk_notes": "Avoid emotional statements; keep it factual."
    }
  ],
  "evaluation": {
    "rubric_ids": [
      "RUBRIC_MESSAGE_QUALITY",
      "RUBRIC_NEGOTIATION_SAFETY"
    ],
    "success_criteria": [
      "Move is explicit and progresses the negotiation.",
      "Message includes a next step or calibrated question."
    ],
    "failure_modes": [
      "Vague ask.",
      "Unnecessary disclosure of urgency or bottom line."
    ],
    "do_not_do": [
      "Do not fabricate facts.",
      "Do not reveal your bottom line unless intentionally walking away."
    ],
    "auto_gates": [
      {
        "gate_id": "GATE_BOTTOM_LINE_LANGUAGE",
        "description": "Warn or block if explicit bottom line language is present.",
        "condition": {
          "type": "PREDICATE",
          "predicate": {
            "op": "MATCHES",
            "path": "/execution_context/draft_text",
            "regex": "(minimum|bottom line|final offer)"
          }
        },
        "severity": "WARN"
      }
    ]
  },
  "ui": {
    "card_title": "Walk away cleanly (professional exit)",
    "card_summary": "If terms are outside your walk-away, exit politely, state the reason at a high level, and leave the door open.",
    "primary_cta": "Run strategy",
    "secondary_ctas": [
      "Edit plan",
      "Generate variants"
    ],
    "icon": "sparkles"
  },
  "references": []
}
