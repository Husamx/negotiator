<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NeGot Prototype</title>
    <link rel="stylesheet" href="/ui/styles/main.css" />
  </head>
  <body>
    <div class="app">
      <aside class="nav">
        <div class="brand">
          <div class="logo">NeGot</div>
          <div class="subtitle">Agentic Negotiation Simulator</div>
        </div>
        <nav>
          <button class="nav-link" data-target="case">Case Setup</button>
          <button class="nav-link" data-target="counterparty">Counterparty</button>
          <button class="nav-link" data-target="controls">Controls</button>
          <button class="nav-link" data-target="simulate">Simulate</button>
          <button class="nav-link" data-target="insights">Insights</button>
          <button class="nav-link" data-target="strategies">Strategies (Advanced)</button>
          <div class="toggle">
            <label>
              <input type="checkbox" id="debugToggle" />
              Debug Mode
            </label>
          </div>
          <button class="nav-link" data-target="debug" id="debugNav" hidden>Debug</button>
        </nav>
      </aside>

      <main class="content">
        <section id="case" class="panel active">
          <h1>Case Setup</h1>
          <div class="panel-grid">
            <div>
              <label>Topic</label>
              <textarea id="topic" rows="2" placeholder="Describe the negotiation topic"></textarea>
            </div>
            <div class="row">
              <div>
                <label>Domain</label>
                <select id="domain">
                  <option value="GENERAL">GENERAL</option>
                  <option value="JOB_OFFER_COMP">JOB_OFFER_COMP</option>
                  <option value="RENT_HOUSING">RENT_HOUSING</option>
                  <option value="PROCUREMENT_VENDOR">PROCUREMENT_VENDOR</option>
                  <option value="SERVICES_CONTRACTOR">SERVICES_CONTRACTOR</option>
                </select>
              </div>
              <div>
                <label>Channel</label>
                <select id="channel">
                  <option value="UNSPECIFIED">UNSPECIFIED</option>
                  <option value="IN_PERSON">IN_PERSON</option>
                  <option value="EMAIL">EMAIL</option>
                  <option value="DM">DM</option>
                </select>
              </div>
            </div>

            <div class="section">
              <div class="section-header">
                <h2>Issues (User)</h2>
                <button id="addUserIssue" type="button">Add User Issue</button>
              </div>
              <div class="editor-grid" id="userIssuesEditor"></div>
            </div>

            <div class="section">
              <div class="section-header">
                <h2>Issues (Counterparty)</h2>
                <button id="addCounterpartyIssue" type="button">Add Counterparty Issue</button>
              </div>
              <div class="editor-grid" id="counterpartyIssuesEditor"></div>
            </div>

            <div class="section">
              <div class="section-header">
                <h2>Objectives</h2>
                <div class="inline-field">
                  <label>Objective Type</label>
                  <select id="objectiveType">
                    <option value="OFFER_VECTOR">OFFER_VECTOR</option>
                    <option value="SINGLE_VALUE">SINGLE_VALUE</option>
                  </select>
                </div>
              </div>
              <div id="objectiveVectorSection" class="editor-grid"></div>
              <div id="objectiveSingleSection" class="editor-grid" hidden>
                <div class="editor-row single-row">
                  <div>
                    <label>Target value</label>
                    <input type="text" id="objectiveTargetSingle" />
                  </div>
                  <div>
                    <label>Reservation value</label>
                    <input type="text" id="objectiveReservationSingle" />
                  </div>
                </div>
              </div>
              <label class="checkbox">
                <input type="checkbox" id="noDealAcceptable" />
                No-deal acceptable
              </label>
            </div>

            <div class="section">
              <div class="section-header">
                <h2>Parameters</h2>
                <button id="addParameter">Add Parameter</button>
              </div>
              <div class="editor-grid" id="parametersEditor"></div>
            </div>

            <div class="actions">
              <button id="loadSample">Load Sample Case</button>
              <button id="createCase" class="primary">Create Case</button>
              <button id="validateCase">Validate</button>
            </div>
            <div class="status" id="caseStatus">No case created.</div>
          </div>
        </section>

        <section id="counterparty" class="panel">
          <h1>Counterparty</h1>
          <div class="panel-grid">
            <div class="row">
              <div>
                <label>Policy Rigidity</label>
                <select id="policyRigidity">
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
              <div>
                <label>Cooperativeness</label>
                <select id="cooperativeness">
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div>
                <label>Time Pressure</label>
                <select id="timePressure">
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
              <div>
                <label>Authority Clarity</label>
                <select id="authorityClarity">
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
            </div>
            <div class="actions">
              <button id="calibratePersona" class="primary">Calibrate Persona</button>
            </div>
            <pre id="personaDistribution" class="output"></pre>
          </div>
        </section>

        <section id="controls" class="panel">
          <h1>Controls</h1>
          <div class="panel-grid">
            <div class="grid-3">
              <div>
                <label>Outcome vs Agreement</label>
                <input type="range" min="0" max="1" step="0.1" id="outcome_vs_agreement" />
              </div>
              <div>
                <label>Speed vs Thoroughness</label>
                <input type="range" min="0" max="1" step="0.1" id="speed_vs_thoroughness" />
              </div>
              <div>
                <label>Risk Tolerance</label>
                <input type="range" min="0" max="1" step="0.1" id="risk_tolerance" />
              </div>
              <div>
                <label>Relationship Sensitivity</label>
                <input type="range" min="0" max="1" step="0.1" id="relationship_sensitivity" />
              </div>
              <div>
                <label>Info Sharing</label>
                <input type="range" min="0" max="1" step="0.1" id="info_sharing" />
              </div>
              <div>
                <label>Creativity vs Discipline</label>
                <input type="range" min="0" max="1" step="0.1" id="creativity_vs_discipline" />
              </div>
              <div>
                <label>Constraint Confidence</label>
                <input type="range" min="0" max="1" step="0.1" id="constraint_confidence" />
              </div>
            </div>
            <div class="row">
              <div>
                <label>Runs</label>
                <input type="number" id="runs" min="1" value="1" />
              </div>
              <div>
                <label>Max Turns</label>
                <input type="number" id="max_turns" min="1" value="8" />
              </div>
              <div>
                <label>Mode</label>
                <select id="mode">
                  <option value="FAST">FAST</option>
                  <option value="DETAILED">DETAILED</option>
                </select>
              </div>
            </div>
            <div class="actions">
              <button id="saveControls" class="primary">Save Controls</button>
            </div>
          </div>
        </section>

        <section id="simulate" class="panel">
          <h1>Simulate</h1>
          <div class="panel-grid">
            <div class="actions">
              <button id="runSim" class="primary">Run Simulations</button>
            </div>
            <div id="runProgress" class="status"></div>
            <div class="table" id="runsTable"></div>
          </div>
        </section>

        <section id="insights" class="panel">
          <h1>Insights</h1>
          <div class="panel-grid">
            <div class="insights-toolbar">
              <button id="loadInsights" class="primary">Load Insights</button>
              <div id="insightsStatus" class="status"></div>
            </div>
            <div class="insights-grid" id="insightsSummary"></div>
            <div class="insights-section">
              <h2>Outcome Distribution</h2>
              <div class="bar-chart" id="outcomeChart"></div>
            </div>
            <div class="insights-section split triple">
              <div>
                <h2>PASS Insights</h2>
                <div class="insight-list" id="bucketPass"></div>
              </div>
              <div>
                <h2>NEUTRAL Insights</h2>
                <div class="insight-list" id="bucketNeutral"></div>
              </div>
              <div>
                <h2>FAIL Insights</h2>
                <div class="insight-list" id="bucketFail"></div>
              </div>
            </div>
            <details class="insights-raw">
              <summary>Raw Insights JSON</summary>
              <pre id="insightsOutput" class="output"></pre>
            </details>
          </div>
        </section>

        <section id="strategies" class="panel">
          <h1>Strategies (Advanced)</h1>
          <div class="panel-grid">
            <div class="actions">
              <button id="loadStrategies">Refresh Strategies</button>
            </div>
            <div id="strategyGrid" class="card-grid"></div>
          </div>
        </section>

        <section id="debug" class="panel">
          <h1>Debug</h1>
          <div class="panel-grid">
            <button id="loadTrace" class="primary">Load Latest Trace</button>
            <div class="section">
              <h2>Agent Flow</h2>
              <div id="traceFlow" class="trace-flow"></div>
            </div>
            <pre id="traceOutput" class="output"></pre>
          </div>
        </section>
      </main>
    </div>

    <script src="/ui/app.js"></script>
  </body>
</html>
